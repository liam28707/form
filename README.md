
**Quick summary**

- Dev servers: run a local Convex dev server and a Vite dev server concurrently.
- Client env: set `VITE_CONVEX_URL` so the React app can contact Convex.
- Functions: `convex/func/register.ts` defines the `registerWorker` mutation.


## Prerequisites

- Node.js (v18+ recommended) and npm
- `npx` available (comes with npm)

## Project layout (key files)

- `form/` — the main repository folder
  - `convex/` — Convex functions and schema
    - `schema.ts` — Convex schema (tables and validators)
    - `func/` (or `convex/func` / `convex/`) — functions; `register.ts` contains `registerWorker`
    - `_generated/` — auto-generated by Convex (`codegen`)
  - `form/` — the Vite + React app (run Vite from this folder)
    - `src/components/RegisterForm.tsx` — the registration UI
    - `src/main.tsx` — Convex provider and app bootstrap
    - `.env.local` — Vite env file (should contain `VITE_CONVEX_URL`)

> Note: In this repo the frontend code lives in `form/form/` (nested). When running Vite use that folder as your working directory.

---

## Setup and local development

1. Install dependencies (project root):

```bash
npm install
```

2. (Optional) Install frontend deps in the nested app folder if you prefer running Vite there explicitly (the repo already includes them):

```bash
cd form/form
npm install
```

3. Start the Convex local dev server (in the project root)

```bash
npx convex dev
```

- This command compiles your Convex functions and starts a local Convex runtime. It prints a local Convex URL (for example `http://localhost:8000`). It also regenerates `convex/_generated` helpers.
- Keep this terminal open while developing.

4. Point the frontend at the Convex runtime

- Create or update the Vite env file used by the app. If you run Vite from `form/form`, create `form/form/.env.local` and add the Convex URL printed by `npx convex dev` (or your cloud URL):

Note: Vite reads `.env*` files from the folder you run `npm run dev` in — make sure your `.env.local` is in the correct place.

5. Start the frontend (Vite)

```bash
cd form/form
npm run dev
```

6. Open the app (usually http://localhost:5173) and test the form.


## Security notes

- Do not store plaintext passwords. This project hashes passwords server-side with bcrypt before inserting them into the database.
- For production, prefer moving hashing and any other non-deterministic or long-running work into a Convex `action` (actions allow timers and side effects). The action can then call a mutation (internal mutation) to write to the DB.
- Keep any secrets out of client-side env variables — variables prefixed with `VITE_` are embedded into the browser bundle and are public.

---

## Useful commands

- Install deps: `npm install`
- Convex codegen (regenerate generated helpers): `npx convex codegen`
- Run Convex locally: `npx convex dev`
- Deploy Convex: `npx convex deploy`
- Run Vite dev server: `cd form/form && npm run dev`
- Build frontend for production (from `form/form`): `npm run build`
